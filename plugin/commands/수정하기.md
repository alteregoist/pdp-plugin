---
description: 기존 상세페이지 HTML 모듈 편집 및 추가
allowed-tools: Read, Write, Edit, Bash, Glob, Grep, Task, AskUserQuestion, TodoWrite, WebFetch, mcp__fal-ai__*
argument-hint: [HTML 파일 경로]
---

기존 상세페이지 HTML 파일을 모듈 단위로 편집한다.

## 실행 순서

### Step 1: 스킬 및 참조 파일 로드

다음 파일들을 읽어 도메인 지식을 로드한다:
- `${CLAUDE_PLUGIN_ROOT}/skills/detail-page-generator/SKILL.md`
- `${CLAUDE_PLUGIN_ROOT}/skills/detail-page-generator/references/modules/common.md`
- `${CLAUDE_PLUGIN_ROOT}/skills/detail-page-generator/references/modules/{플랫폼명}.md` (해당 HTML의 플랫폼에 맞게 로드)

### Step 2: 기존 데이터 로드

$ARGUMENTS 또는 사용자가 지정한 HTML 파일의 상위 폴더(상품명 폴더)에서 다음 파일들을 함께 읽는다:
- `product_info.yaml` — 상품 정보 (카테고리, 특장점, 스펙 등)
- `image_log.json` — 이미지 생성 이력 (프롬프트, 모델, 원본 URL)

HTML 파일을 읽어 현재 모듈 구성을 파싱한다:
- `data-module-type` 속성으로 모듈 유형 식별
- `data-module-order` 속성으로 모듈 순서 확인
- 각 모듈의 현재 내용(텍스트, 이미지) 요약

파싱 결과를 사용자에게 표시한다:
```
현재 모듈 구성:
1. [A] 상단배너 - "상품명 헤드라인"
2. [B] 한눈에 보기 - 4개 특장점
3. [C-1] 컷샷 - 3개 이미지+텍스트 블록
...
```

### Step 3: 편집 작업 확인

AskUserQuestion으로 수행할 작업을 확인한다:

**편집 유형**:
- 모듈 텍스트 수정 — 특정 모듈의 카피/내용 변경
- 모듈 이미지 교체 — 새 이미지로 교체 또는 fal.ai로 재생성
- 모듈 순서 변경 — 모듈 배치 순서 조정
- 새 모듈 추가 — modules.md 템플릿 기반으로 신규 모듈 삽입
- 모듈 삭제 — 특정 모듈 제거
- 전체 스타일 조정 — 색상, 폰트 등 전체 톤 변경

### Step 4: 편집 수행

요청받은 편집 작업을 수행한다:

**텍스트 수정 시**:
- Edit 도구로 해당 모듈의 텍스트 직접 수정
- copywriting-guide.md 참조하여 품질 유지

**이미지 교체 시**:
- 사용자가 새 이미지를 제공하면 경로 교체하고 `originals/`에 원본 복사
- fal.ai로 재생성 시 `image_log.json`에서 기존 프롬프트를 참고하여 조정
- image-generation.md 참조하여 프롬프트 작성
- 생성/편집된 이미지 정보를 `image_log.json`에 추가 기록

**새 모듈 추가 시**:
- modules.md에서 해당 모듈 유형의 HTML 템플릿 가져오기
- 내용 채우기 (카피라이팅, 이미지 생성)
- `data-module-order` 재번호 매기기
- 적절한 위치에 삽입

**모듈 순서 변경 시**:
- `<section>` 블록을 재배치
- `data-module-order` 값 업데이트
- A(상단배너)는 항상 첫 번째, F(표시사항)는 항상 마지막 규칙 유지

**모듈 삭제 시**:
- 해당 `<section>` 블록 제거
- 나머지 모듈의 `data-module-order` 재번호 매기기

### Step 5: 재캡처 및 출력

수정된 HTML을 저장하고:
1. Playwright로 전체 페이지 및 수정된 모듈 재캡처
2. 변경 전/후 요약 제공
3. 결과 파일 링크 제공

### 주의사항

- 편집 시 기존 모듈의 TailwindCSS 스타일 일관성 유지
- `data-module-type`과 `data-module-order` 속성은 반드시 유지
- 이미지 경로는 `./images/` 상대경로 유지
- 편집 전 원본 HTML 백업 생성 (`_backup` 접미사)
- 수정 완료 후 `product_info.yaml`의 `수정일`을 갱신한다
- 이미지 변경 시 `image_log.json`에 새 기록을 추가한다 (기존 기록은 삭제하지 않고 이력으로 유지)
